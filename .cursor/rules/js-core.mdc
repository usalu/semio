---
description:
globs: js/core/**/*.*
alwaysApply: false
---

# Project

Shared react components. The main component is Sketchpad. Sketchpad is used in three different szenarios:

1. As guest mode (readonly) in a statically generated pages.
2. As user mode in the browser (nextjs).
3. As user mode in a desktop app (electron).
   Sketchpad has a local store in yjs which syncs with indexeddb and the backend provider.

# Guidelines

- All domain logic is in semio.ts and whenever an operation is not ui bound, it should be implemented there.
- All state is stored in the SketchpadStore. All state and cruds are accessed over hooks.
- There are different scopes: SketchpadScope, KitScope, DesignScope, DesignEditorScope.
- There is a transaction mechanism for kits. Every design editor transaction is an extended kit transaction. The undo redo manager is on editor level and stores the diff of the transaction along with the editor state. This way undo redo works even when the kit changes because only the diff is stored.
- Internal components use `import {default as NAME} from "@semio/js/components/ui/NAME.tsx"` as import and external components use `import {NAME} from "@semio/js"`.
