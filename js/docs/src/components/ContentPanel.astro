---
// ContentPanel.astro - Original structure with floating panels added
import Sidebar from './Sidebar.astro';
import PageSidebar from './PageSidebar.astro';
---

<!-- Original ContentPanel structure -->
<div class="content-panel">
	<div class="sl-container"><slot /></div>
</div>

<!-- Add floating panels as overlays -->
<Fragment>
	<Sidebar />
	<PageSidebar />
</Fragment>

<script>
	document.addEventListener('DOMContentLoaded', () => {
		// Hide original Starlight sidebars that might be created elsewhere
		const hideOriginalSidebars = () => {
			const originalSidebars = document.querySelectorAll('.sidebar:not(#sidebar-root), .right-sidebar:not(#page-sidebar-root)');
			originalSidebars.forEach(sidebar => {
				(sidebar as HTMLElement).style.display = 'none';
			});
		};

		// Run immediately and after a delay to catch dynamically created elements
		hideOriginalSidebars();
		setTimeout(hideOriginalSidebars, 100);
	});
</script>

<style>
	@layer starlight.core {
		.content-panel {
			padding: 1.5rem var(--sl-content-pad-x);
		}
		.content-panel + .content-panel {
			border-top: 1px solid var(--sl-color-hairline);
		}
		.sl-container {
			max-width: var(--sl-content-width);
		}

		.sl-container > :global(* + *) {
			margin-top: 1.5rem;
		}

		@media (min-width: 72rem) {
			.sl-container {
				margin-inline: var(--sl-content-margin-inline, auto);
			}
		}
	}
</style>
